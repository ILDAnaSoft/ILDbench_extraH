<marlin>
	<execute>
		<!--processor name="InitDD4hep"/-->
		<processor name="MyMCLevelClassify"/>
		<processor name="MyMCLeptonTagging"/>
		<processor name="MyIsolatedLeptonTaggingProcessor"/>
		<processor name="My_Strange_Lepton"/>
	</execute>

	<global>
		<parameter name="LCIOInputFiles">
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_0.slcio
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_1.slcio
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_2.slcio
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_3.slcio
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_4.slcio
/pnfs/desy.de/ilc/prod/ilc/mc-opt-3/ild/dst-merged/500-TDR_ws/2f_Z_leptonic/ILD_l5_o1_v02/v02-00-01/rv02-00-01.sv02-00-01.mILD_l5_o1_v02.E500-TDR_ws.I250106.P2f_z_l.eL.pR.n001.d_dstm_10255_5.slcio
		</parameter>
		<parameter name="MaxRecordNumber" value="10000" />  
		<parameter name="SkipNEvents" value="0" />
		<parameter name="SupressCheck" value="false" />  
		<parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT">WARNING</parameter>
		<parameter name="AllowToModifyEvent" value="true" />
	</global>

	<processor name="InitDD4hep" type="InitializeDD4hep">
	<!--InitializeDD4hep reads a compact xml file and initializes the DD4hep::LCDD object-->
	<!--Name of the DD4hep compact xml file to load-->
	<parameter name="DD4hepXMLFile" type="string"> $lcgeo_DIR/ILD/compact/ILD_l5_v02/ILD_l5_v02.xml </parameter>
	<!--parameter name="DD4hepXMLFile" type="string"> $lcgeo_DIR/ILD/compact/ILD_s5_v02/ILD_s5_v02.xml </parameter-->
	</processor>


	<processor name="MyMCLevelClassify" type="MCLevelClassify">
		<!--Classify MCs for different levels Processor-->

		<!--Input collection of ReconstructedParticles-->
		<parameter name="InputCollection" type="string" lcioInType="MCParticle">MCParticle</parameter>

		<!--Output collection of whether need output collection-->
		<parameter name="SwitchOutputCollection" type="bool"> true</parameter>
		<!--Output collection of hard scattering level-->
		<parameter name="OutputCollectionHardScattering" type="string" lcioOutType="MCParticle">MCHS</parameter>
		<!--Output collection of pythia stable level-->
		<parameter name="OutputCollectionPythiaStable" type="string" lcioOutType="MCParticle">MCPS</parameter>
		<!--Output collection of detector simulation level -->
		<parameter name="OutputCollectionDetectorSimulation" type="string" lcioOutType="MCParticle">MCDS</parameter>

		<!--Input collection of Link from Reco to MC-->
		<parameter name="InputRecoMCTruthLink" type="string" lcioInType="LCRELATION">RecoMCTruthLink</parameter>
		<!--Input collection of Link from MC to Reco-->
		<parameter name="InputMCTruthRecoLink" type="string" lcioInType="LCRELATION">MCTruthRecoLink</parameter>

		<!--Output root file-->
		<parameter name="SwitchOutputRoot" type="bool"> false </parameter>
		<parameter name="RootFileName"> ../results/output_level.root </parameter>
	</processor>


	<processor name="MyMCLeptonTagging" type="MCLeptonTagging">
		<!--Classify MCs for different levels Processor-->

		<!--Input collection of ReconstructedParticles-->
		<parameter name="InputHSCollection" type="string" lcioInType="MCParticle">MCHS</parameter>
		<!--Input collection of ReconstructedParticles-->
		<parameter name="InputCollection" type="string" lcioInType="MCParticle">MCHS</parameter>


		<!--Output collection of whether need output collection-->
		<parameter name="SwitchOutputCollection" type="bool"> true </parameter>
		<!--Output collection of hard scattering level-->
		<parameter name="OutputCollectionWoLepton" type="string" lcioOutType="MCParticle">MCHS_WoLepton</parameter>
		<!--Output collection of pythia stable level-->
		<parameter name="OutputCollectionLepton" type="string" lcioOutType="MCParticle">MCHS_Lepton</parameter>

		<!--Input parameter-->
		<parameter name="lep_type" type="int"> 13  </parameter>
		<!--Maximum cos cone angle size-->
		<parameter name="MinimalLeptonEnergy" type="float">5</parameter>
		<parameter name="MaximalCosConeAngle" type="float">0.99 </parameter>
		<parameter name="ConeEnergyRatio" type="float">0.95 </parameter>

		<!--Output root file-->
		<parameter name="SwitchOutputRoot" type="bool"> false </parameter>
		<parameter name="RootFileName"> ../results/output_PS.root </parameter>
	</processor>

	<processor name="MyIsolatedLeptonTaggingProcessor" type="IsolatedLeptonTaggingProcessor">
		<parameter name="CosConeLarge" type="float">0.95 </parameter>
		<parameter name="CosConeSmall" type="float">0.98 </parameter>
		<parameter name="CutOnTheISOElectronMVA" type="float"> 2 </parameter>
		<parameter name="CutOnTheISOMuonMVA" type="float">0.8 </parameter>
		<parameter name="DirOfISOElectronWeights" type="string"> /afs/desy.de/user/y/ywang/Software/executable/MarlinReco/Analysis/IsolatedLeptonTagging/example/isolated_electron_weights_woIP </parameter>
		<parameter name="DirOfISOMuonWeights" type="string">    /afs/desy.de/user/y/ywang/Software/executable/MarlinReco/Analysis/IsolatedLeptonTagging/example/isolated_muon_weights_woIP_woYoke </parameter>
		<parameter name="InputPandoraPFOsCollection" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
  <!--Name of the Primary Vertex collection-->
		<parameter name="InputPrimaryVertexCollection" type="string" lcioInType="ReconstructedParticle">PrimaryVertex </parameter>
		<!--flag to select one most like isolated lepton-->
		<parameter name="IsSelectingOneIsoLep" type="bool">false</parameter>
		<parameter name="MaxD0SigForElectron" type="float">50 </parameter>
		<parameter name="MaxD0SigForMuon" type="float">20</parameter>
		<parameter name="MaxEOverPForElectron" type="float">1.3 </parameter>
		<parameter name="MaxEOverPForMuon" type="float">0.3 </parameter>
		<parameter name="MaxZ0SigForElectron" type="float">50</parameter>
		<parameter name="MaxZ0SigForMuon" type="float">20 </parameter>
		<parameter name="MinEOverPForElectron" type="float">0.5 </parameter>
		<parameter name="MinEecalOverTotEForElectron" type="float">0.9 </parameter>
		<parameter name="UseYokeForMuonID" type="bool"> false </parameter>
		<!--Minimum energy in yoke for electron-->
		<parameter name="MinEyokeForMuon" type="float">0.5 </parameter>
		<parameter name="MinPForElectron" type="float">5 </parameter>
		<parameter name="MinPForMuon" type="float">5 </parameter>
		<parameter name="UseIP" type="bool"> false </parameter>
		<!--use impact parameters-->
		<parameter name="OutputIsoLeptonsCollection" type="string" lcioOutType="ReconstructedParticle"> PFO_Lepton</parameter>
		<parameter name="OutputPFOsWithoutIsoLepCollection" type="string" lcioOutType="ReconstructedParticle"> PFOWoIsoleps </parameter>
		<parameter name="Verbosity" type="string"> SILENT </parameter>
	</processor>


	<processor name="My_Strange_Lepton" type="Strange_Lepton">
		<!--Input collection of MCParticles-->
		<parameter name="InputMCsLeptonCollection" type="string" lcioInType="MCParticle">MCHS</parameter>

		<!--Input collection of RCParticles-->
		<parameter name="InputPFOLeptonCollection" type="string" lcioInType="ReconstructedParticles">PFO_Lepton</parameter>

		<!--Input collection of Link from Reco to MC-->
		<parameter name="InputRecoMCTruthLink" type="string" lcioInType="LCRELATION">RecoMCTruthLink</parameter>
		<!--Input collection of Link from MC to Reco-->
		<parameter name="InputMCTruthRecoLink" type="string" lcioInType="LCRELATION">MCTruthRecoLink</parameter>

		<!--Output collection-->
		<!--Output collection of whether need output collection-->
		<parameter name="SwitchOutputCollection" type="bool"> false </parameter>

		<!--Output collection of PFO related from MC photon-->
		<parameter name="OutputPFOLeptonCollection" type="string" lcioOutType="ReconstructedParticle">PFOIsoLeptonConversion</parameter>

		<!--Output root file name-->
		<parameter name="SwitchOutputRoot" type="bool"> true </parameter>
		<parameter name="RootFileName"> $PWD/../results/2f_l_eL.pR.root </parameter>

	</processor>


</marlin>

